!function(window){"use strict";function masonryHorizontalDefinition(getSize,LayoutMode){var MasonryHorizontal=LayoutMode.create("masonryHorizontal");return MasonryHorizontal.prototype._resetLayout=function(){this.getRowHeight(),this._getMeasurement("gutter","outerHeight"),this.rowHeight+=this.gutter,this.rows=Math.floor((this.isotope.size.innerHeight+this.gutter)/this.rowHeight),this.rows=Math.max(this.rows,1);var i=this.rows;for(this.rowXs=[];i--;)this.rowXs.push(0);this.maxX=0},MasonryHorizontal.prototype._getItemLayoutPosition=function(item){item.getSize();var rowSpan=Math.ceil(item.size.outerHeight/this.rowHeight);rowSpan=Math.min(rowSpan,this.rows);for(var rowGroup=this._getRowGroup(rowSpan),minimumX=Math.min.apply(Math,rowGroup),shortRowIndex=indexOf(rowGroup,minimumX),position={x:minimumX,y:this.rowHeight*shortRowIndex},setWidth=minimumX+item.size.outerWidth,setSpan=this.rows+1-rowGroup.length,i=0;setSpan>i;i++)this.rowXs[shortRowIndex+i]=setWidth;return position},MasonryHorizontal.prototype._getRowGroup=function(rowSpan){if(2>rowSpan)return this.rowXs;for(var rowGroup=[],groupCount=this.rows+1-rowSpan,i=0;groupCount>i;i++){var groupRowXs=this.rowXs.slice(i,i+rowSpan);rowGroup[i]=Math.max.apply(Math,groupRowXs)}return rowGroup},MasonryHorizontal.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp),offset=this.isotope._getElementOffset(stamp),firstY=this.isotope.options.isOriginTop?offset.top:offset.bottom,lastY=firstY+stampSize.outerHeight,firstRow=Math.floor(firstY/this.rowHeight);firstRow=Math.max(0,firstRow);var lastRow=Math.floor(lastY/this.rowHeight);lastRow=Math.min(this.rows-1,lastRow);for(var stampMaxX=(this.isotope.options.isOriginLeft?offset.left:offset.right)+stampSize.outerWidth,i=firstRow;lastRow>=i;i++)this.rowXs[i]=Math.max(stampMaxX,this.rowXs[i])},MasonryHorizontal.prototype._getContainerSize=function(){return this.maxX=Math.max.apply(Math,this.rowXs),{width:this.maxX}},MasonryHorizontal.prototype.needsResizeLayout=function(){return this.needsVerticalResizeLayout()},MasonryHorizontal}var indexOf=Array.prototype.indexOf?function(items,value){return items.indexOf(value)}:function(items,value){for(var i=0,len=items.length;len>i;i++){var item=items[i];if(item===value)return i}return-1};"function"==typeof define&&define.amd?define(["get-size/get-size","isotope/js/layout-mode"],masonryHorizontalDefinition):masonryHorizontalDefinition(window.getSize,window.Isotope.LayoutMode)}(window);